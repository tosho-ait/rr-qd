!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("redux-api-middleware"),require("redux-thunk"),require("redux")):"function"==typeof define&&define.amd?define("ReactFancy",["redux-api-middleware","redux-thunk","redux"],t):"object"==typeof exports?exports.ReactFancy=t(require("redux-api-middleware"),require("redux-thunk"),require("redux")):e.ReactFancy=t(e["redux-api-middleware"],e["redux-thunk"],e.redux)}(window,function(e,t,a){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=10)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasAugmentLogin=t.hasAugmentLogout=t.hasAugmentSetPublic=t.apiCall=t.loginCall=t.authPing=t.includeParameters=t.resolveOnError=t.resetLists=t.confirmRoutePrime=t.confirmRouteRelease=t.scrollTop=t.hideErrorMessage=t.hideWarningMessage=t.hideInfoMessage=t.hideMessage=t.showErrorMessage=t.showWarningMessage=t.showInfoMessage=t.showMessage=t.logout=t.logoutOn403=t.DELETE=t.POST=t.GET=t.ERR=t.RSP=t.REQ=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=a(1);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o=t.REQ="_REQ",i=t.RSP="_RSP",u=t.ERR="_ERR";t.GET="GET",t.POST="POST",t.DELETE="DELETE",t.logoutOn403=!0,t.logout=!0,t.showMessage=!0,t.showInfoMessage=!0,t.showWarningMessage=!0,t.showErrorMessage=!0,t.hideMessage=!0,t.hideInfoMessage=!0,t.hideWarningMessage=!0,t.hideErrorMessage=!0,t.scrollTop=!0,t.confirmRouteRelease=!0,t.confirmRoutePrime=!0,t.resetLists=!0,t.resolveOnError=!0,t.includeParameters=!0,t.authPing=!0,t.loginCall=!0,t.apiCall=function(e){var t=e.name,a=e.endpoint,l=e.method,c=e.trackRequest,m=e.request,g=e.response,d=e.error,f=e.includeParameters,p=e.resolveOnError,v=e.headers,b=e.authPing,y=e.loginCall,h=function(e){var h=void 0,_=void 0,O=void 0,j=void 0,k=void 0,P=void 0,R=void 0,w=void 0,S=void 0,M=void 0;e&&(h=e.jsonData,_=e.stringData,O=e.reject,j=e.resolve,k=e.data,P=e.id,R=e.request,w=e.response,S=e.error,M=e.formData,e.headers&&(v=e.headers),e.trackRequest&&(c=e.trackRequest));var I=[{type:t+a+o,meta:{}},{type:t+a+i,meta:{}},{type:t+a+u,meta:{}}];if(m&&(I[0].meta=r({},m)),g&&(I[1].meta=r({},g)),d&&(I[2].meta=r({},d)),R&&(I[0].meta=r({},I[0].meta,R)),w&&(I[1].meta=r({},I[1].meta,w)),S&&(I[2].meta=r({},I[2].meta,S)),f&&e&&(I[0].meta.parameters=e,I[1].meta.parameters=e,I[2].meta.parameters=e),c){I[0].meta.trackReq=c,I[1].meta.trackRsp=c,I[2].meta.trackRsp=c;var E=Math.floor(1e6*Math.random());I[0].meta.trackKey=E,I[1].meta.trackKey=E,I[2].meta.trackKey=E}j&&(I[1].meta.resolve=j,p&&(I[2].meta.resolve=j)),y&&I[1].meta.loginResponse&&(I[0].meta.loginRequest=!0,I[2].meta.loginError=!0),b&&(I[0].meta.authPingRequet=!0,I[1].meta.authPingResponse=!0,I[2].meta.authPingError=!0),O&&!p&&(I[2].meta.reject=O);var x={endpoint:a,method:l,headers:function(e){var t={};return v&&v.noJson||(t.Accept="application/json",t["Content-Type"]="application/json"),v&&v.noToken||(t.Authorization=e.auth.token),v&&v.token&&(t.Authorization=v.token),t},types:I};return h&&(x.body=JSON.stringify(h)),k&&(x.body=JSON.stringify(k)),_&&(x.body=String(_)),P&&(x.body=String(P)),M&&(x.body=M),s({},n.CALL_API,x)};return{endpoint:a,name:t,request:t+a+o,response:t+a+i,error:t+a+u,action:h,binder:function(){return s({},t,h)}}},t.hasAugmentSetPublic=function(e){return!(!e.meta||!e.meta.setPublic&&""!==e.meta.setPublic)&&(e.meta.setPublic?e.meta.setPublic:" ")},t.hasAugmentLogout=function(e){return e.meta&&e.meta.logout},t.hasAugmentLogin=function(e){return e.meta&&e.meta.loginResponse}},function(t,a){t.exports=e},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=a(0),s={track:{},stale:{},anyLoading:!1,STALE_YES:1,STALE_LOAD:2,STALE_NOT:3},o=function(e,t){if(e.meta&&e.meta.trackReq){var a=r({},t.track);a[e.meta.trackKey]={req:(new Date).getTime(),rsp:null,name:e.meta.trackReq};var n=r({},t.stale);n[e.meta.trackReq]=2;var s=!1;for(var o in a)a[o].rsp||(s=!0);return a=function(e){var t={},a=(new Date).getTime();for(var r in e)e[r].req&&a-e[r].req<36e5&&(t[r]=e[r]);return t}(a),Object.assign({},t,{track:a,stale:n,anyLoading:s})}return t};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];if((0,n.hasAugmentLogout)(t)||(0,n.hasAugmentLogin)(t))return s;var a=e;return a=function(e,t){if(e.meta&&e.meta.trackStaleUp){var a=r({},t.stale);return e.meta.trackStaleUp.map?e.meta.trackStaleUp.map(function(e){a[e]=1}):a[e.meta.trackStaleUp]=1,Object.assign({},t,{stale:a})}return t}(t,a=function(e,t){if(e.meta&&e.meta.trackRsp){var a=r({},t.track);a[e.meta.trackKey]&&(a[e.meta.trackKey].rsp=(new Date).getTime());var n=r({},t.stale);n[e.meta.trackRsp]=3;var s=!1;for(var o in a)a[o].rsp||(s=!0);return Object.assign({},t,{track:a,stale:n,anyLoading:s})}return t}(t,a=o(t,a)))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(e.meta&&(e.meta.setPublic||""===e.meta.setPublic)&&(window.location.hash!="#"+e.meta.setPublic&&window.location.hash!=e.meta.setPublic&&(window.location.hash="#"+e.meta.setPublic),e.meta.setPublic!=t.publicpart)){var a=e.meta.setPublic;return a.indexOf("?")>-1&&(a=a.split("?")[0]),Object.assign({},n(t),{publicpart:a,publicprops:function(e){if(e.indexOf("?")<0)return{};for(var t=void 0,a=/\+/g,r=/([^&=]+)=?([^&]*)/g,n=function(e){return decodeURIComponent(e.replace(a," "))},s=e.substr(e.indexOf("?")+1),o={};t=r.exec(s);)o[n(t[1])]=n(t[2]);return o}(e.meta.setPublic)})}return t},n=function(e){return Object.assign({},e,{confirmRoute:!1})},s=function(e){window.location.hash="#"+e},o=function(e,t){return e.payload&&500==e.payload.status&&(t=function(e,t){return null!=e?Object.assign({},t,{privateprops:e}):t}({backendError:e.payload},t),s("error")),t},i=function(e,t){return e.meta&&e.meta.hideMessage?function(e){var t={_message:null};return Object.assign({},e,{messages:Object.assign({},e.messages,t)})}(t):t},u=function(e,t){return e.meta&&e.meta.hideInfoMessage?function(e){var t={_info:null};return Object.assign({},e,{messages:Object.assign({},e.messages,t)})}(t):t},l=function(e,t){return e.meta&&e.meta.hideWarningMessage?function(e){var t={_warning:null};return Object.assign({},e,{messages:Object.assign({},e.messages,t)})}(t):t},c=function(e,t){return e.meta&&e.meta.hideErrorMessage?function(e){var t={_error:null};return Object.assign({},e,{messages:Object.assign({},e.messages,t)})}(t):t},m={publicpart:"",publicprops:{},privateprops:{},messages:{},confirmRoute:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments[1],a=e;return a=i(t,a),a=u(t,a),a=l(t,a),a=function(e,t){return e.meta&&e.meta.reject&&(e.payload&&e.payload.response&&e.payload.response.errors?e.meta.reject(e.payload.response.errors):e.payload&&e.payload.response&&e.payload.response.messages?e.meta.reject(e.payload.response.messages):e.payload&&e.payload.response&&e.payload.response.errorMessage?e.meta.reject({_error:e.payload.response.errorMessage}):e.payload&&e.payload.response&&e.payload.response.message?e.meta.reject({_error:e.payload.response.message}):e.meta.reject({_error:"Error!"})),t}(t,a=function(e,t){return e.meta&&e.meta.resolve&&e.meta.resolve(),t}(t,a=function(e,t){return e.meta&&e.meta.logoutOn403&&e.payload&&403==e.payload.status&&s(""),t}(t,a=c(t,a)))),a=function(e,t){return e.meta&&e.meta.scrollTop&&window.scrollTo(0,0),t}(t,a=function(e,t){if(e.meta&&e.meta.showErrorMessage&&e.payload&&e.payload.response&&e.payload.response.messages&&e.payload.response.messages._error){var a={};return a._error={text:e.payload.response.messages._error},Object.assign({},t,{messages:Object.assign({},t.messages,a)})}return t}(t,a=function(e,t){if(e.meta&&e.meta.showWarningMessage){if(e.payload&&e.payload.messages&&e.payload.messages._warning){var a={};return a._warning={text:e.payload.messages._warning},Object.assign({},t,{messages:Object.assign({},t.messages,a)})}if(e.meta&&e.meta._warning){var r={};return r._warning={text:e.meta._warning},Object.assign({},t,{messages:Object.assign({},t.messages,r)})}}return t}(t,a=function(e,t){if(e.meta&&e.meta.showInfoMessage){if(e.payload&&e.payload.messages&&e.payload.messages._info){var a={};return a._info={text:e.payload.messages._info},Object.assign({},t,{messages:Object.assign({},t.messages,a)})}if(e.meta&&e.meta._info){var r={};return r._info={text:e.meta._info},Object.assign({},t,{messages:Object.assign({},t.messages,r)})}}return t}(t,a=function(e,t){if(e.meta&&e.meta.showMessage){if(e.payload&&e.payload.messages&&e.payload.messages._message){var a={};return a._message={text:e.payload.messages._message},Object.assign({},t,{messages:Object.assign({},t.messages,a)})}if(e.meta&&e.meta.message){var r={};return r._message={text:e.meta.message},Object.assign({},t,{messages:Object.assign({},t.messages,r)})}}return t}(t,a=function(e,t){return e.meta&&e.meta.setPrivateProps?Object.assign({},t,{privateprops:Object.assign({},t.privateprops,e.meta.setPrivateProps)}):t}(t,a=function(e,t){return e.meta&&e.meta.clearPrivateProps?Object.assign({},t,{privateprops:{}}):t}(t,a=function(e,t){return e.meta&&e.meta.confirmRoutePrime?Object.assign({},t,{confirmRoute:!0}):t}(t,a=function(e,t){return e.meta&&e.meta.confirmRouteRelease?Object.assign({},t,{confirmRoute:!1}):t}(t,a=r(t,a)))))))))),a=o(t,a)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),n={};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1];if((0,r.hasAugmentLogout)(t)||(0,r.hasAugmentLogin)(t))return n;if(t.meta&&t.meta.saveStateKey){var a=Object.assign({},e);return a[t.meta.saveStateKey]=t.meta.saveStateVal,Object.assign({},e,a)}return e}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),n={lists:{}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1];if(t.meta&&t.meta.loadListResponse){var a=t.meta.loadListResponse(t),s=Object.assign({},e.lists);return s[a.listName]=a.list,Object.assign({},e,{lists:s})}return(0,r.hasAugmentLogout)(t)||(0,r.hasAugmentLogin)(t)?n:t.meta&&t.meta.resetLists?n:e}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isAuthenticated:!!localStorage.getItem("id_token"),token:localStorage.getItem("id_token"),userDetails:localStorage.getItem("id_token")?JSON.parse(localStorage.getItem("id_token_userdetails")):null,userId:localStorage.getItem("id_token")?localStorage.getItem("id_token_userid"):null,confirmed:!1,loginRequestInProgress:!1},t=arguments[1],a=e;return a=function(e,t){return e.meta&&e.meta.logoutOn403&&e.payload&&403==e.payload.status?(localStorage.removeItem("id_token"),localStorage.removeItem("id_token_userdetails"),localStorage.removeItem("id_token_userid"),Object.assign({},t,{isAuthenticated:!1,token:null,userDetails:null,userId:null})):t}(t,a=function(e,t){return e.meta&&e.meta.logout?(localStorage.removeItem("id_token"),localStorage.removeItem("id_token_userdetails"),localStorage.removeItem("id_token_userid"),Object.assign({},t,{isAuthenticated:!1,token:null,userDetails:null,userId:null})):t}(t,a=function(e,t){return e.meta&&e.meta.loginError?Object.assign({},t,{loginRequestInProgress:!1}):t}(t,a=function(e,t){return e.meta&&e.meta.authPingError?(localStorage.removeItem("id_token"),localStorage.removeItem("id_token_userdetails"),localStorage.removeItem("id_token_userid"),Object.assign({},t,{isAuthenticated:!1,token:null,userDetails:null,userId:null,confirmed:!0})):t}(t,a=function(e,t){return e.meta&&e.meta.authPingResponse?Object.assign({},t,{confirmed:!0}):t}(t,a=function(e,t){if(e.meta&&e.meta.loginResponse){var a=e.meta.loginResponse(e);return localStorage.setItem("id_token",a.token),localStorage.setItem("id_token_userdetails",JSON.stringify(a.userDetails)),localStorage.setItem("id_token_userid",JSON.stringify(a.userId)),Object.assign({},t,{isAuthenticated:!0,token:a.token,userDetails:a.userDetails,userId:a.userId,loginRequestInProgress:!1})}return t}(t,a=function(e,t){return e.meta&&e.meta.loginRequest?Object.assign({},t,{loginRequestInProgress:!0}):t}(t,a)))))))}},function(e,a){e.exports=t},function(e,t){e.exports=a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=a(8),s=a(7),o=(r=s)&&r.__esModule?r:{default:r},i=a(1);t.default=function(e){window.fancy={autoLoadAction:e.autoLoadAction};var t=(0,n.applyMiddleware)(o.default,i.apiMiddleware)(n.createStore)(e.reducers),a=function(){var e=window.location.hash;e=e&&e.length>1?e.substr(1):"",t.getState().router.publicpart!=e&&t.dispatch({type:"DNM",meta:{setPublic:e}})};return window.onhashchange=a,a(),window.addEventListener("beforeunload",function(e){var a=t.getState().router.confirmRoute;if(a)return(e||window.event).returnValue=a,"Are you sure"}),t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducers=t.apiDeclare=t.fancyInit=void 0;var r=c(a(9)),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0)),s=c(a(6)),o=c(a(5)),i=c(a(4)),u=c(a(3)),l=c(a(2));function c(e){return e&&e.__esModule?e:{default:e}}var m={auth:s.default,lists:o.default,props:i.default,router:u.default,track:l.default};t.fancyInit=r.default,t.apiDeclare=n,t.reducers=m}])});